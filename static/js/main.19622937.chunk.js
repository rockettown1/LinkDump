(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,n,t){},57:function(e,n,t){e.exports=t(81)},62:function(e,n,t){},81:function(e,n,t){"use strict";t.r(n);var a=t(54),r=t(0),i=t.n(r),o=t(44),c=t.n(o),l=(t(62),t(11)),s=t(12),u=t(14),m=t(13),d=t(15),p=t(23),f=t(21),v="auth-token",h=(t(33),function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=localStorage.getItem(v),t={paddingLeft:"10px"};return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},i.a.createElement("h1",null,"Tech Links Braindump")),i.a.createElement("div",{className:"allOptions"},i.a.createElement("div",{className:"linkOptions"},i.a.createElement(p.b,{to:"/",className:"no-underline options"},i.a.createElement("p",{style:{paddingRight:"10px"}},"View List")),n&&i.a.createElement("div",{className:"submitLink"},i.a.createElement("div",{className:""},i.a.createElement("p",null,"|")),i.a.createElement(p.b,{to:"/create",className:"no-underline options"},i.a.createElement("p",{style:{paddingLeft:"7px",paddingRight:"10px"}},"Submit a Link"))),i.a.createElement("p",null,"|")),i.a.createElement("div",{className:"log"},n?i.a.createElement("div",{className:"pointer black",onClick:function(){localStorage.removeItem(v),e.props.history.push("/")}},i.a.createElement("p",{style:t},"Logout")):i.a.createElement(p.b,{to:"/login",className:"no-underline black"},i.a.createElement("p",{style:t},"Login")))),i.a.createElement("h4",null,"A collection of interesting tech links, tutorials etc. Sign up and Log in to post and up-vote \u25b2"))}}]),n}(r.Component)),b=Object(f.f)(h),g=t(53),k=t(17),E=t(20),y=t(18),O=t.n(y);function j(){var e=Object(k.a)(["\n  mutation VoteMutation($linkId: ID!) {\n    vote(linkId: $linkId) {\n      id\n      link {\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n      user {\n        id\n      }\n    }\n  }\n"]);return j=function(){return e},e}var w=O()(j()),N=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=localStorage.getItem(v);return i.a.createElement("div",{className:"flex mt2 items-start"},i.a.createElement("div",{className:"flex items-center"},i.a.createElement("span",{className:"gray"},this.props.index+1,"."),n&&i.a.createElement(E.b,{mutation:w,variables:{linkId:this.props.link.id},update:function(n,t){var a=t.data.vote;return e.props.updateStoreAfterVote(n,a,e.props.link.id)}},function(e){return i.a.createElement("div",{className:"ml1 gray f11",onClick:e},"\u25b2")})),i.a.createElement("div",{className:"linksToShow"},i.a.createElement("div",{className:"displayThese"},i.a.createElement("div",null,this.props.link.description),i.a.createElement("p",null,"---"),i.a.createElement("div",{className:"theURL"}," ",i.a.createElement("a",{href:this.props.link.url},"(",this.props.link.url,")"))),i.a.createElement("div",{className:" lh-copy gray"},this.props.link.votes.length," votes | posted by"," ",this.props.link.postedBy?this.props.link.postedBy.name:"Unknown"," ")))}}]),n}(r.Component);function S(){var e=Object(k.a)(["\n  subscription {\n    newVote {\n      id\n      link {\n        id\n        url\n        description\n        postedBy {\n          id\n          name\n        }\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n      user {\n        id\n      }\n    }\n  }\n"]);return S=function(){return e},e}function x(){var e=Object(k.a)(["\n  subscription {\n    newLink {\n      id\n      url\n      description\n      postedBy {\n        id\n        name\n      }\n      votes {\n        id\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=Object(k.a)(["\n  query {\n    feed {\n      links {\n        id\n        postedBy {\n          id\n          name\n        }\n        url\n        description\n        votes {\n          id\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return C=function(){return e},e}var L=O()(C()),$=O()(x()),_=O()(S()),I=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r))))._updateCacheAfterVote=function(e,n,t){var a=e.readQuery({query:L});a.feed.links.find(function(e){return e.id===t}).votes=n.link.votes,e.writeQuery({query:L,data:a})},t._subscribeToNewLinks=function(e){e({document:$,updateQuery:function(e,n){var t=n.subscriptionData;if(!t.data)return e;var a=t.data.newLink;return e.feed.links.find(function(e){return e.id===a.id})?e:Object.assign({},e,{feed:{links:[a].concat(Object(g.a)(e.feed.links)),count:e.feed.links.length+1,__typename:e.feed.__typename}})}})},t._subscribeToNewVotes=function(e){e({document:_})},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(E.c,{query:L},function(n){var t=n.loading,a=n.error,r=n.data,o=n.subscribeToMore;if(t)return i.a.createElement("div",null,"Fetching");if(a)return i.a.createElement("div",null,"Error");e._subscribeToNewLinks(o),e._subscribeToNewVotes(o);var c=r.feed.links;return i.a.createElement("div",{className:""},c.map(function(n,t){return i.a.createElement(N,{key:n.id,link:n,index:t,updateStoreAfterVote:e._updateCacheAfterVote})}))})}}]),n}(r.Component);function T(){var e=Object(k.a)(["\n  mutation PostMutation($description: String!, $url: String!) {\n    post(description: $description, url: $url) {\n      id\n      url\n      description\n    }\n  }\n"]);return T=function(){return e},e}var A=O()(T()),B=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r)))).state={description:"",url:""},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=this.state,t=n.description,a=n.url;return i.a.createElement("div",null,i.a.createElement("div",{className:"flex flex-column mt3"},i.a.createElement("input",{className:"mb2",value:t,onChange:function(n){return e.setState({description:n.target.value})},type:"text",placeholder:"A description for the link"}),i.a.createElement("input",{className:"mb2",value:a,onChange:function(n){return e.setState({url:n.target.value})},type:"text",placeholder:"The URL for the link"})),i.a.createElement(E.b,{mutation:A,variables:{description:t,url:a},onCompleted:function(){return e.props.history.push("/")},update:function(e,n){var t=n.data.post,a=e.readQuery({query:L});a.feed.links.unshift(t),e.writeQuery({query:L,data:a})}},function(e,n){var t=n.loading;n.error;return t?i.a.createElement("p",null,"Saving..."):i.a.createElement("button",{onClick:e},"Submit")}))}}]),n}(r.Component),V=t(40),q=t.n(V),U=t(49);function D(){var e=Object(k.a)(["\n  mutation LoginMutation($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n    }\n  }\n"]);return D=function(){return e},e}function M(){var e=Object(k.a)(["\n  mutation SignupMutation($email: String!, $password: String!, $name: String!) {\n    signup(email: $email, password: $password, name: $name) {\n      token\n    }\n  }\n"]);return M=function(){return e},e}var Q=O()(M()),R=O()(D()),P=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(m.a)(n)).call.apply(e,[this].concat(r)))).state={login:!0,email:"",password:"",name:""},t._confirm=function(){var e=Object(U.a)(q.a.mark(function e(n){var a,r;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.state.login?n.login:n.signup,r=a.token,t._saveUserData(r),t.props.history.push("/");case 3:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),t._saveUserData=function(e){localStorage.setItem(v,e)},t}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this,n=this.state,t=n.login,a=n.email,r=n.password,o=n.name;return i.a.createElement("div",null,i.a.createElement("h4",{className:"mv3"},t?"Login":"Sign Up"),i.a.createElement("div",{className:"flex flex-column"},!t&&i.a.createElement("input",{value:o,onChange:function(n){return e.setState({name:n.target.value})},type:"text",placeholder:"Your name"}),i.a.createElement("input",{value:a,onChange:function(n){return e.setState({email:n.target.value})},type:"text",placeholder:"Your email address"}),i.a.createElement("input",{value:r,onChange:function(n){return e.setState({password:n.target.value})},type:"password",placeholder:"Your Password"})),i.a.createElement("div",{className:"flex mt3"},i.a.createElement(E.b,{mutation:t?R:Q,variables:{email:a,password:r,name:o},onCompleted:function(n){return e._confirm(n)}},function(e){return i.a.createElement("div",{className:"pointer mr2 button",onClick:e},t?"login":"create account")}),i.a.createElement("div",{className:"pointer button",onClick:function(){return e.setState({login:!t})}},t?"need to create an account?":"already have an account?")))}}]),n}(r.Component),Y=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"main"},i.a.createElement(b,null),i.a.createElement("div",{className:"linkItems background-gray"},i.a.createElement(f.c,null,i.a.createElement(f.a,{exact:!0,path:"/",component:I}),i.a.createElement(f.a,{exact:!0,path:"/create",component:B}),i.a.createElement(f.a,{exact:!0,path:"/login",component:P}))))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=t(26),W=t(55),z=t(52),F=t(50),G=t(8),H=t(51),K=t(2),X=Object(W.a)({uri:"http://localhost:4000"}),Z=Object(F.a)(function(e,n){var t=n.headers,r=localStorage.getItem(v);return{headers:Object(a.a)({},t,{authorization:r?"Bearer ".concat(r):""})}}),ee=new H.a({uri:"ws://localhost:4000",options:{reconnect:!0,connectionParams:{authToken:localStorage.getItem(v)}}}),ne=Object(G.d)(function(e){var n=e.query,t=Object(K.l)(n),a=t.kind,r=t.operation;return"OperationDefinition"===a&&"subscription"===r},ee,Z.concat(X)),te=new J.a({link:ne,cache:new z.a});c.a.render(i.a.createElement(p.a,null,i.a.createElement(E.a,{client:te},i.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.19622937.chunk.js.map